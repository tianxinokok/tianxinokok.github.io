<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
    <link rel="stylesheet" href="/source/css/index.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="/source/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/source/css/post_last.css" type="text/css">
    <link rel="stylesheet" href="/source/css/obsidian.min.css">
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>摆渡先生</title>
   <!-- <link rel="stylesheet" href="/css/highlight.css" type="text/css">-->
</head>

 <body>
   <div class="container">
       <header>
          <svg style="display: none"  version="1.1" xmlns="http://www.w3.org/2000/svg">
    <filter id="grayscale">
        <feColorMatrix type="matrix"  id="ie_svg" values="0.3333 0.3333 0.3333 0 0
                                             0.3333 0.3333 0.3333 0 0 
                                             0.3333 0.3333 0.3333 0 0 
                                             0 0 0 1 0"/>
    </filter>
</svg>
<div class="header">
	<div class="poster_img gray">
	<svg class="box_svg" width="100%" height="100%" >
		<image  class="img_svg" xlink:href="/source/img/index_left.jpg" x="0" y="0" width="100%" height="100%" preserveAspectRatio="xMinYMin slice" filter="url('#grayscale')"></image>
	</svg>	
	</div>
	<div class="header_cover">
		<div class="nav">
			<ul class="nav_ul">
				<li data-subtitle="首页"><a href="/"><i class="fa fa-home"></i></a></li>
				<li data-subtitle="自留地"><a href="/prose"><i class="fa fa-heart"></i></a></li>
				<li data-subtitle="书籍"><a href="/book"><i class="fa fa-book" ></i></a></li>
				<li data-subtitle="微信"><a href="/contact"><i class="fa fa-comments"></i></a></li>
				<li data-subtitle="夜间模式"><i class="fa fa-moon-o"></i></li>
			</ul>
		</div>
	</div>
	<div style="display: none;">
		本站访客数：<span id="busuanzi_value_site_uv"></span>人次
		本站总访问量：<span id="busuanzi_value_site_pv"></span>次
		本文总阅读量：<span id="busuanzi_value_page_pv"></span>次
	</div>
	<div style="display: none;">
			<script type="text/javascript" src="//rf.revolvermaps.com/0/0/6.js?i=52zqlc4vy2q&amp;m=7&amp;c=e63100&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=90&amp;lx=-420&amp;ly=420&amp;hi=20&amp;he=7&amp;hc=a8ddff&amp;rs=80" async="async"></script>
	</div>
</div>
<div class="bottom_line"></div>
      </header> 
       <div class="content_box">
          <div class="content" >
            <div class="post_content">
                <div class="doubleMenuList">
                    <ul>
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/30/let%E5%92%8Cconst.html" data-post-href="/es6/2018/12/30/let%E5%92%8Cconst.html">let和const</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/29/%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC.html" data-post-href="/es6/2018/12/29/%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC.html">变量的解构赋值</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/28/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/28/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95.html">字符串的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/27/%E6%AD%A3%E5%88%99%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/27/%E6%AD%A3%E5%88%99%E7%9A%84%E6%89%A9%E5%B1%95.html">正则的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/26/%E6%95%B0%E5%80%BC%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/26/%E6%95%B0%E5%80%BC%E7%9A%84%E6%89%A9%E5%B1%95.html">数值的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/25/%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/25/%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95.html">函数的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/24/%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/24/%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95.html">数组的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/23/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/23/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95.html">对象的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/22/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95.html" data-post-href="/es6/2018/12/22/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95.html">对象的新增方法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/21/Symbol.html" data-post-href="/es6/2018/12/21/Symbol.html">Symbol</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" data-post-href="/es6/2018/12/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html">Set 和 Map 数据结构</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/19/Proxy.html" data-post-href="/es6/2018/12/19/Proxy.html">Proxy</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/18/Reflect.html" data-post-href="/es6/2018/12/18/Reflect.html">Reflect</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/17/Promise-%E5%AF%B9%E8%B1%A1.html" data-post-href="/es6/2018/12/17/Promise-%E5%AF%B9%E8%B1%A1.html">Promise 对象</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/16/Iterator-%E5%92%8C-for...of-%E5%BE%AA%E7%8E%AF.html" data-post-href="/es6/2018/12/16/Iterator-%E5%92%8C-for...of-%E5%BE%AA%E7%8E%AF.html">Iterator 和 for...of 循环</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/15/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95.html" data-post-href="/es6/2018/12/15/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95.html">Generator 函数的语法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/14/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8.html" data-post-href="/es6/2018/12/14/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8.html">Generator 函数的异步应用</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/13/async-%E5%87%BD%E6%95%B0.html" data-post-href="/es6/2018/12/13/async-%E5%87%BD%E6%95%B0.html">async 函数</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/12/Class-%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html" data-post-href="/es6/2018/12/12/Class-%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html">Class 的基本语法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/11/Class-%E7%9A%84%E7%BB%A7%E6%89%BF.html" data-post-href="/es6/2018/12/11/Class-%E7%9A%84%E7%BB%A7%E6%89%BF.html">Class 的继承</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/10/Decorator.html" data-post-href="/es6/2018/12/10/Decorator.html">Decorator</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/09/Module-%E7%9A%84%E8%AF%AD%E6%B3%95.html" data-post-href="/es6/2018/12/09/Module-%E7%9A%84%E8%AF%AD%E6%B3%95.html">Module 的语法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/08/Module-%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0.html" data-post-href="/es6/2018/12/08/Module-%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0.html">Module 的加载实现</a>
                          </div>
                        </div>
                      </li> 
                      
                    </ul>
                </div>
                <div class="doubleMenuContent">
                  <div class="content_title">
                    <h2>函数的扩展</h2>
                    <span id="busuanzi_container_page_pv">
                    <time datetime=""></time>
                    </span>
                  </div>
                   <h3 id="一函数参数的默认值">一、函数参数的默认值</h3>
<h4 id="基本用法">基本用法</h4>
<p>ES6之前，不能直接为函数的参数指定默认值，只能采用变通的方法。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function log(x,y){
  y = y || 'world';
  console.log(x,y);
}
log() //undefined world
log('Hello') // Hello world
log('Hello', 'abc') // Hello abc
log('Hello', '') // Hello world
</code></pre>
</div>
<p>上面代码检查函数的参数y有没有赋值，如果没有，则指定默认值为world。这种写法的缺点是：如果参数y赋值了，但是对应的布尔值为false，则该赋值不起作用，log(‘Hello’,’‘)中y传入空字符串，结果被改为默认值。</p>

<p>为了避免这个问题，通常需要先判断一下参数y是否被赋值，如果没有，再等于默认值。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function log(x,y){
  if (typeof y === 'undefined') {
  y = 'World';
 }
  console.log(x,y);
}
log('hello');                //hello world
log('hello' , '');           //hello
log('hello' , 'abc');        //hello abc
log('hello' , undefined);    //hello world
log('hello' , 'undefined');  //hello undefined
</code></pre>
</div>
<p>ES6允许为函数的参数设置默认值，即直接写在参数定义的后面。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function log(x,y = 'world'){
  console.log(x,y);
}
log();                       //undefined "world"
log('hello');                //hello world
log('hello' , '');           //hello
log('hello' , 'abc');        //hello abc
log('hello' , undefined);    //hello world
log('hello' , 'undefined');  //hello undefined
</code></pre>
</div>
<p>ES6的写法比ES5简单很多。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(x = 0,y = 0){
	this.x = x;
	this.y = y;
}
const abc = new func();
console.log(abc);
</code></pre>
</div>
<p>除了写法简洁明了之外，ES6的写法还有两个好处：1.阅读代码的人，可以立刻意识到哪些参数是可以省略的，不用查看函数体 2. 有利于将来的代码优化，即使代码在未来彻底拿掉这个参数，也不会导致以前的代码无法运行。
【】最后一句啥意思 ? 是执行的时候拿掉参数 ？，声明的时候拿掉参数代码还能运行么？</p>

<p>参数变量默认是声明的，所以不能用let或者const再次声明。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(x = 0){
	let x = 1; //报错
}
func();
</code></pre>
</div>
<p>使用参数默认值时，函数不能有同名参数。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>//不报错
function func(x ,x, y){

}
//报错
function func(x,x,y=1){

}
</code></pre>
</div>
<p>注意：参数默认值不是传值的，而是每次都重新计算默认值表达式的值。也就是说，参数默认值是惰性求值的。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let a = 1;
function func(x = a + 1){
	console.log(x);
}
func(); //2
a = 2;
func(); //3
</code></pre>
</div>
<p>上面代码中，函数func的参数x的默认值是a + 1，每次执行都会重新计算a + 1的值，而不是一直等于第一次的结果。</p>

<h4 id="与解构赋值默认值结合使用">与解构赋值默认值结合使用</h4>
<p>参数默认值可以与解构赋值的默认值结合起来使用。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func({x,y=1}){
	console.log(x,y);
}
func({x:1,y:2}); //1,2
func({x:1}); 	 //1,1
func({y:2});     //undefined,2
func({});        //undefined,1
func();          //报错 Cannot destructure property `x` of 'undefined' or 'null'.
</code></pre>
</div>
<p>上面代码给对象的解构赋值设置了默认值值，并没有给函数参数本身设置默认值，只有当函数的参数是一个对象时，变量x和y才会通过解构赋值生成，如果调用函数时没有传递任何参数，不能通过解构赋值生成变量x和y，导致函数出错。知道了这个原因，如果给函数的参数设置一个默认值，就可以避免这种情况。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func({x,y=1} = {}){
	console.log(x,y);
}
func(); //undefined，1
</code></pre>
</div>
<p>上面代码中，如果没有传递参数，默认值为一个空对象。</p>

<p>下面是一个解构赋值默认值的例子。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(url,{a,b ='abc',c}){
	console.log(b);
}
func('https://xxxx',{});  //abc
func('https://xxxx');  //报错
</code></pre>
</div>
<p>上面代码中，函数func的第二个参数是一个对象，可以给这个对象的三个属性设置默认值，这种写法不能省略第二个参数，这时如果给这个对象（函数的第二个参数）一个参数默认值，就可以省略第二个参数。这时，就有了双重默认值。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(url,{a,b ='abc',c} = {}){
	console.log(b);
}
func('https://xxxx',{}); //abc
func('https://xxxx');    //abc
</code></pre>
</div>
<p>上面代码中，函数没有传入第二个参数时，函数参数的默认值开始生效，然后是解构赋值的默认值生效，变量b才会取到默认值。</p>

<p>下面两种写法有什么区别？</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func({a=1,b=2} = {}){
	console.log(a,b);
}          

function func1({a,b} = {a:1,b:2}){
	console.log(a,b);
}
</code></pre>
</div>
<p>上面两种写法 第一种写法是设置了函数的参数的默认值为一个空对象，但是设置了对象解构赋值的默认值，第二种写法是设置了函数参数的默认值为一个有属性和值的对象，但是没有设置对象解构赋值的默认值。这两种写法的函数传参运行情况如下。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>//都不传入参数
func();  		 //1,2
func1(); 		 //1,2
//都传入参数
func({a:3,b:4}); //3,4
func1({a:3,b:4});//3,4
//只传入a参数
func({a:5});     //5,2
func1({a:5});    //5,undefined
//传入空对象
func({});        //1,2
func1({});       //undefined,undefined
//传入错误参数
func({a:6,c:7}); //6,2
func1({a:6,c:6});//6,undefined
</code></pre>
</div>
<h4 id="参数默认值的位置">参数默认值的位置</h4>
<p>通常情况下，设置了默认值的参数，应该放在参数额最后，这样比较容易看出来省略了哪些参数。如果不是尾部的参数设置了默认值，实际上这个参数是没法省略的。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(a,b=2,c){
	console.log(a,b,c);
}
func();              //undefined,undefined
func(1);			 //1,2,undefined
func(1,2);           //1,2,undefined
func(1,,3);          //报错
func(1,2,3);         //1,2,3
func(1,undefined,3); //1,2,3
</code></pre>
</div>
<p>上面的函数有默认值的参数是第二个，所以没法只省略第二个参数，而不省略其他参数，除非传入undefined。</p>

<p>如果传入undefined，该参数将等于默认值，null则不是这样。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(a,b=2,c){
	console.log(a,b,c);
}
func(1,null,3); //1,null,3
</code></pre>
</div>
<h4 id="函数的length属性">函数的length属性</h4>
<p>函数的length属性，将返回没有制定默认值的参数个数，所以函数参数设置了默认值后，函数的length属性将不准确。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>var func  = function (a,b,c=3){
};
console.log(func.length); //2
</code></pre>
</div>
<p>上面的函数中，末位参数设置了默认值，所以函数的length返回了2（3-1），之所以这样是因为length的含义是：该函数预期传入的参数个数，某个参数制定默认值之后，预期传入的参数就不包括这个参数了 。 同理， 后文的rest参数也不会计入length。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>(function(...args) {}).length // 0
</code></pre>
</div>
<p>【】直接复制</p>

<p>如果设置了默认值的的参数不是尾参数，那么这个参数和之后的参数都不计入length。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>var func  = function (a,b=2,c){
};
console.log(func.length);//1
</code></pre>
</div>
<h4 id="作用域">作用域</h4>


                </div>
            </div>
          </div>
       </div>
    </div>
  </body>
  <script src="/source/js/highlight.min.js"></script>
  <script type="text/javascript" src="/source/js/jquery.js"></script>
  <script type="text/javascript" src="/source/js/index.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
</html>