<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
    <link rel="stylesheet" href="/source/css/index.css" type="text/css">
    <link rel="stylesheet" type="text/css" href="/source/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/source/css/post_last.css" type="text/css">
    <link rel="stylesheet" href="/source/css/obsidian.min.css">
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>摆渡先生</title>
   <!-- <link rel="stylesheet" href="/css/highlight.css" type="text/css">-->
</head>

 <body>
   <div class="container">
       <header>
          <svg style="display: none"  version="1.1" xmlns="http://www.w3.org/2000/svg">
    <filter id="grayscale">
        <feColorMatrix type="matrix"  id="ie_svg" values="0.3333 0.3333 0.3333 0 0
                                             0.3333 0.3333 0.3333 0 0 
                                             0.3333 0.3333 0.3333 0 0 
                                             0 0 0 1 0"/>
    </filter>
</svg>
<div class="header">
	<div class="poster_img gray">
	<svg class="box_svg" width="100%" height="100%" >
		<image  class="img_svg" xlink:href="/source/img/index_left.jpg" x="0" y="0" width="100%" height="100%" preserveAspectRatio="xMinYMin slice" filter="url('#grayscale')"></image>
	</svg>	
	</div>
	<div class="header_cover">
		<div class="nav">
			<ul class="nav_ul">
				<li data-subtitle="首页"><a href="/"><i class="fa fa-home"></i></a></li>
				<li data-subtitle="自留地"><a href="/prose"><i class="fa fa-heart"></i></a></li>
				<li data-subtitle="书籍"><a href="/book"><i class="fa fa-book" ></i></a></li>
				<li data-subtitle="微信"><a href="/contact"><i class="fa fa-comments"></i></a></li>
				<li data-subtitle="夜间模式"><i class="fa fa-moon-o"></i></li>
			</ul>
		</div>
	</div>
	<div style="display: none;">
		本站访客数：<span id="busuanzi_value_site_uv"></span>人次
		本站总访问量：<span id="busuanzi_value_site_pv"></span>次
		本文总阅读量：<span id="busuanzi_value_page_pv"></span>次
	</div>
	<div style="display: none;">
			<script type="text/javascript" src="//rf.revolvermaps.com/0/0/6.js?i=52zqlc4vy2q&amp;m=7&amp;c=e63100&amp;cr1=ffffff&amp;f=arial&amp;l=0&amp;bv=90&amp;lx=-420&amp;ly=420&amp;hi=20&amp;he=7&amp;hc=a8ddff&amp;rs=80" async="async"></script>
	</div>
</div>
<div class="bottom_line"></div>
      </header> 
       <div class="content_box">
          <div class="content" >
            <div class="post_content">
                <div class="doubleMenuList">
                    <ul>
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/30/let%E5%92%8Cconst.html" data-post-href="/es6/2018/12/30/let%E5%92%8Cconst.html">let和const</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/29/%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC.html" data-post-href="/es6/2018/12/29/%E5%8F%98%E9%87%8F%E7%9A%84%E8%A7%A3%E6%9E%84%E8%B5%8B%E5%80%BC.html">变量的解构赋值</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/28/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/28/%E5%AD%97%E7%AC%A6%E4%B8%B2%E7%9A%84%E6%89%A9%E5%B1%95.html">字符串的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/27/%E6%AD%A3%E5%88%99%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/27/%E6%AD%A3%E5%88%99%E7%9A%84%E6%89%A9%E5%B1%95.html">正则的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/26/%E6%95%B0%E5%80%BC%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/26/%E6%95%B0%E5%80%BC%E7%9A%84%E6%89%A9%E5%B1%95.html">数值的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/25/%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/25/%E5%87%BD%E6%95%B0%E7%9A%84%E6%89%A9%E5%B1%95.html">函数的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/24/%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/24/%E6%95%B0%E7%BB%84%E7%9A%84%E6%89%A9%E5%B1%95.html">数组的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/23/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95.html" data-post-href="/es6/2018/12/23/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%89%A9%E5%B1%95.html">对象的扩展</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/22/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95.html" data-post-href="/es6/2018/12/22/%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B0%E5%A2%9E%E6%96%B9%E6%B3%95.html">对象的新增方法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/21/Symbol.html" data-post-href="/es6/2018/12/21/Symbol.html">Symbol</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" data-post-href="/es6/2018/12/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html">Set 和 Map 数据结构</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/19/Proxy.html" data-post-href="/es6/2018/12/19/Proxy.html">Proxy</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/18/Reflect.html" data-post-href="/es6/2018/12/18/Reflect.html">Reflect</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/17/Promise-%E5%AF%B9%E8%B1%A1.html" data-post-href="/es6/2018/12/17/Promise-%E5%AF%B9%E8%B1%A1.html">Promise 对象</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/16/Iterator-%E5%92%8C-for...of-%E5%BE%AA%E7%8E%AF.html" data-post-href="/es6/2018/12/16/Iterator-%E5%92%8C-for...of-%E5%BE%AA%E7%8E%AF.html">Iterator 和 for...of 循环</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/15/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95.html" data-post-href="/es6/2018/12/15/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E8%AF%AD%E6%B3%95.html">Generator 函数的语法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/14/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8.html" data-post-href="/es6/2018/12/14/Generator-%E5%87%BD%E6%95%B0%E7%9A%84%E5%BC%82%E6%AD%A5%E5%BA%94%E7%94%A8.html">Generator 函数的异步应用</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/13/async-%E5%87%BD%E6%95%B0.html" data-post-href="/es6/2018/12/13/async-%E5%87%BD%E6%95%B0.html">async 函数</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/12/Class-%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html" data-post-href="/es6/2018/12/12/Class-%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html">Class 的基本语法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/11/Class-%E7%9A%84%E7%BB%A7%E6%89%BF.html" data-post-href="/es6/2018/12/11/Class-%E7%9A%84%E7%BB%A7%E6%89%BF.html">Class 的继承</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/10/Decorator.html" data-post-href="/es6/2018/12/10/Decorator.html">Decorator</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/09/Module-%E7%9A%84%E8%AF%AD%E6%B3%95.html" data-post-href="/es6/2018/12/09/Module-%E7%9A%84%E8%AF%AD%E6%B3%95.html">Module 的语法</a>
                          </div>
                        </div>
                      </li> 
                      
                      <li>
                        <div>
                          <div class="post_title">
                          <a class="post-link" href="/es6/2018/12/08/Module-%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0.html" data-post-href="/es6/2018/12/08/Module-%E7%9A%84%E5%8A%A0%E8%BD%BD%E5%AE%9E%E7%8E%B0.html">Module 的加载实现</a>
                          </div>
                        </div>
                      </li> 
                      
                    </ul>
                </div>
                <div class="doubleMenuContent">
                  <div class="content_title">
                    <h2>变量的解构赋值</h2>
                    <span id="busuanzi_container_page_pv">
                    <time datetime=""></time>
                    </span>
                  </div>
                   <h3 id="一数组的解构赋值">一、数组的解构赋值</h3>
<h4 id="基本用法">基本用法</h4>
<p>ES6允许按照一定模式，从数组和对象中获取值，对变量进行赋值，这被称为解构。</p>

<p>以前，为变量赋值，只能直接指定值。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let a = 1 ;
let b = 'adc';
</code></pre>
</div>
<p>ES6可以写成下面这样</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [a,b] = [1,'abc'];
console.log(a);
console.log(b);
</code></pre>
</div>
<p>上面代码表示：等号左边声明了两个变量a和b，按照对应位置赋值等号右边数组里的1和adc。只要等号两边的模式相同，等号左边的变量就会对应位置赋予右边的值，
下面是使用数组嵌套进行解构的例子。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [a,[b]] = [1,['abc']];
console.log(a);//1
console.log(b);//adc

let [,,c] = [1,2,'adc'];
console.log(c);//adc

let [x,,y] = [1,2,3];
console.log(x);//1
console.log(y);//3

let [n,...m] = [1,2,3];
console.log(n);//1
console.log(m);//[2,3]

let [n1,n2,...n3] = [1];
console.log(n1);//1
console.log(n2);//undefined
console.log(n3);//[]

</code></pre>
</div>
<p>如果解构不成功，解构这词真难受，叫赋值不成功吧，如果等号右边的值数量小于等号左边的变量数量，多处的变量的值就等于undifined。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [x1] = [];
console.log(x1);//undefined
let [x2,x3] = [1];
console.log(x3);//undefined
</code></pre>
</div>
<p>以上两种都属于赋值不成功。</p>

<p>另一种情况是不完全赋值，即等号右边的值的数量大于等号左边变量的数量，这样就只匹配等号右边部分的值，也就是说多余的就用不上了。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [a,b] = [1,2,3];
console.log(a);//1
console.log(b);//2

let [a1,[b1],c1] = [1,[2,3],4];
console.log(a1);//1
console.log(b1);//2
console.log(c1);//4
</code></pre>
</div>
<p>上面两个例子，都属于不完全赋值，都是可以赋值成功的。</p>

<p>如果等号的右边不是数组(或者严格的说，不是可遍历的解构），那么将会报错。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [x1] = {};         //报错
let [x1] = 1;          //报错
let [x1] = true;       //报错
let [x1] = undefined;  //报错
let [x1] = 'undefined';//x1 = u,这个可以，字符出可遍历
</code></pre>
</div>
<p>对于Set数据结构，也可以使用数组的解构赋值。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [a,b,c] = new Set([1,2,3]);
console.log(a); 
</code></pre>
</div>
<p>事实上，只要某种数据解构具有Iterator接口，都可以采用数组形式的解构赋值。</p>

<p>【】这里有个Generator函数,还没学到，看不懂，后面补。</p>

<h4 id="默认值">默认值</h4>
<p>解构赋值允许指定默认值</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [a = 1] = [];
console.log(a);//1

let [b,c='adc'] = [1];
console.log(b);//1
console.log(c); //abc

let [d,f='abc'] = [1,undefined];
console.log(d);//1
console.log(f);//abc
</code></pre>
</div>
<p>注意：ES6内部使用严格相等运算符(===)判断一个位置是否有值。所以当一个数组内的变量成员对应的位置严格等于undefined，默认值才会生效。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [d,f='abc'] = [1,undefined];
console.log(f);//abc 默认值生效

let [j,h='adc'] = [1,2];
console.log(h); //2 默认值未生效，虽然h有默认值，但是等号右边对应位置不严格等于undefined

let [i=1] = [null];
console.log(i);//null，默认值同样未生效，原因也是对应位置null不严格等于undefined
</code></pre>
</div>
<p>如果默认值是一个表达式，那么这个表达式是惰性求值的，只有在用到的时候才会求值。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(){
	return 1;
}
let [a = func()] = [2];
console.log(a);//2 func并不会执行
</code></pre>
</div>
<p>上面的代码中函数func不会执行，因为a可以取到等号右边的值。上面的代码实际等于下面的代码</p>
<div class="highlighter-rouge"><pre class="highlight"><code>function func(){
	return 1;
}
let a ;
if([2][0] === undefined){
	a = func();
}else{
	a = [2][0];
}
console.log(a);//2
</code></pre>
</div>
<p>默认值可以引用解构赋值的其他变量，但该变量必须已经声明.。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let [a = 1, b = a] = [];
console.log(b);//1

let [a = 1, b = a] = [2];
console.log(a);//2
console.log(b);//2

let [a = 1, b = a] = [1,2];
console.log(a);//1
console.log(b);//2

let [a=b,b] = [1];
console.log(a);//1
console.log(b);//undefined

let [a=b,b] = [];//报错 b is not defined
</code></pre>
</div>
<h3 id="二对象的解构赋值">二、对象的解构赋值</h3>
<p>解构不仅可以用于数组，还可以用于对象。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let {obj1,obj2} = {obj1:1,obj2:2};
console.log(obj1);//1
console.log(obj2);//1
</code></pre>
</div>
<p>对象的解构与数组的解构有一个不同，数组中变量和值的对应是按位置对应的，而对象的变量赋值是没有位置概念的，是靠属性名对应赋值的。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let {x,y} = {x:1,y:2};
console.log(x);//1
console.log(y);//1

let { z, x } = {x:1, y:2};
console.log(z); //undefined
console.log(x); //1
</code></pre>
</div>
<p>上面的代码第一个例子把顺序调换了一下，但是等号右边的属性名只要有对应上，就可以解构成功，第二个例子obj3在等号右边没有对应的属性名，所以值为undefined。</p>

<p>如果变量名与属性名不一致，必须写成下面这样。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let {x:z} = {x:1};
console.log(z);//1

let obj = {x:1,y:'abc'};
let {x:x1,y:y1} = obj;
console.log(x1);//1
console.log(y1);//abc
</code></pre>
</div>
<p>这实际上说明：对象的解构赋值是下面形式的简写。参见《对象的扩展》。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let {x:x, y:y} = {x:1,y:'abc'};
console.log(x);//1
console.log(y);//abc
</code></pre>
</div>
<p>也就是说，对象的解构赋值的内部机制，是先找到同名属性，然后再赋值给对应的变量。真正被赋值的是后者，而不是前者。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let {x:y} = {x:1};
console.log(y);//1
console.log(x);// 报错 x is not defined
</code></pre>
</div>
<p>上面代码中,x是匹配的模式，y才是被赋值的变量，而不是模式被赋值。</p>

<p>与数组一样，解构也可以用于嵌套解构的对象。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let obj  = {
	name:'tx',
	p:[
		1,
		{age:28}
	]
};
let {name,p:[y,{ age }] } = obj;
console.log(name);//tx
console.log(y);//1
console.log(age);//28 
</code></pre>
</div>
<p>下面是另一个例子。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>const obj = {
	loc : {
		start:{
			line:1,
			column:'abc'
		}
	}
};
let {loc,loc:{ start } , loc:{ start :{ line,column } } } = obj;
console.log(loc);
console.log(start);
console.log(line);
console.log(column);
</code></pre>
</div>
<p>上面代码有四次解构赋值，分别对loc，start，line，column四个属性的解构赋值，注意，对line和column赋值的时候，外层的start和loc都是匹配模式，不是变量。</p>

<p>下面是嵌套赋值</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let obj = {};
let arr = [];
({ x:obj.name , y:arr[0] } = {x:'tx',y:[1,2]}); //这个括号是干嘛滴 ？
console.log(obj);//{name: "tx"}
console.log(arr);//[1,2]
</code></pre>
</div>


                </div>
            </div>
          </div>
       </div>
    </div>
  </body>
  <script src="/source/js/highlight.min.js"></script>
  <script type="text/javascript" src="/source/js/jquery.js"></script>
  <script type="text/javascript" src="/source/js/index.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
  </script>
</html>