<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
    <link rel="stylesheet" href="/source/css/index.css" type="text/css">
    <link rel="stylesheet" href="/source/css/post_last.css" type="text/css">
    <link rel="stylesheet" href="/source/css/obsidian.min.css">
<!--     <link rel="stylesheet" type="text/css" href="/source/css/nav.css"> -->
    <link rel="stylesheet" type="text/css" href="/source/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>摆渡先生</title>
   <!-- <link rel="stylesheet" href="/css/highlight.css" type="text/css">-->
</head>

 <body>
 <style type="text/css">

.nav {
  position: fixed;
  z-index: 100;
  top: 0;
  left: 0;
  width: 100%;
  height: 100vh;
  visibility: hidden;
}
.nav_open {
  visibility: visible;
}
.nav__list {
  display: flex;
  height: 100%;
  margin: 0;
  padding: 0;
  list-style: none;
}
.nav__item {
  position: relative;
  flex-basis: 25%;
  margin: 0;
  padding: 0;
}
.nav__link {
  position: relative;
  display: flex;
  align-items: center;
  height: 100%;
  padding: 0 0 0 20%;
  text-decoration: none;
  color: white;
  will-change: transform;
  transition: color 0.5s;
}
.nav__link:hover {
  color: black;
}
.nav__item-line {
  position: absolute;
  top: 0;
  right: 0;
  display: block;
  width: 1px;
  height: 100%;
  background: rgba(255, 255, 255, 0.2);
}
.nav__link-content {
  position: relative;
  z-index: 3;
}

.nav__link-base {
  position: absolute;
  z-index: 1;
  top: 0;
  left: 0;
  width: 100%;
  height: calc(100% - 150px);
  background-color: white;
  box-shadow: 2px 4px 16px 0 rgba(0, 0, 0, 0.2);
  will-change: transition;
  opacity: 0;
}
.nav__link:hover .nav__link-base {
  z-index: 2;
}
.nav__link-num {
  position: absolute;
  top: 12px;
  left: -24px;
  font-size: 16px;
  font-family: "bebas-neue", sans-serif;
}

.nav__link-title {
  font-size: 36px;
  text-transform: uppercase;
  font-family: "bebas-neue", sans-serif;
  margin-bottom: 8px;
  line-height: 0.8;
  overflow: hidden;
}

.nav__link-desc {
  display: block;
  font-size: 12px;
}
/*btn*/
.nav-btn {
  position: fixed;
  z-index: 101;
  bottom: 24px;
  left: 24px;
  width: 36px;
  height: 36px;
  background: transparent;
  padding: 0;
  margin: 0;
  border: none;
  appearance: none;
  outline: 0;
  cursor: pointer;
}
.burger {
  width: 36px;
  height: 36px;
}

.burger__stroke {
  stroke: white;
}

.burger__plus {
  fill: #1cb5e0;
}
/**/
.nav__bg {
  position: fixed;
  z-index: 99;
  top: 0;
  left: 0;
  width: 100vw;
  height: 100vh;
  will-change: auto;
  pointer-events: none;
  visibility: hidden;
}

.nav__bg-mask-rect {
  will-change: transform;
}
</style>
<div class="nav_box" style="z-index: 10000">
<nav class="nav">
	<ul class="nav__list">
		<li class="nav__item">
			<a class="nav__link" href="/">
				<div class="nav__link-content">
					<span class="nav__link-num">01</span>
					<div class="nav__link-title">Works</div>
					<div class="nav__link-desc">What I'm made</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
		<li class="nav__item">
			<a class="nav__link" href="/new">
				<div class="nav__link-content">
					<span class="nav__link-num">02</span>
					<div class="nav__link-title">News</div>
					<div class="nav__link-desc">Latest ramblings</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
		<li class="nav__item">
			<a class="nav__link" href="/book">
				<div class="nav__link-content">
					<span class="nav__link-num">03</span>
					<div class="nav__link-title">Books</div>
					<div class="nav__link-desc">Many good books</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
		<li class="nav__item">
			<a class="nav__link" href="/contact">
				<div class="nav__link-content">
					<span class="nav__link-num">04</span>
					<div class="nav__link-title">Contact</div>
					<div class="nav__link-desc">Don't be shy</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
	</ul>
</nav>
<svg class="nav__bg" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient class="nav__grad" x1="92.6356902%" y1="7.36430977%" x2="0%" y2="100%" id="nav-grad">
            <stop stop-color="#000000" offset="20%"></stop>
            <stop stop-color="#1cb5e0" offset="100%"></stop>
        </linearGradient>
		<mask id="nav__bg-mask" class="nav__bg-mask" maskUnits="userSpaceOnUse"x="0" y="0" width="100" height="100">
		  	<rect class="nav__bg-mask-rect" x="0" y="0" width="25" height="100" fill="white"/>
			<rect class="nav__bg-mask-rect" x="24.9" y="0" width="25.1" height="100" fill="white"/>
			<rect class="nav__bg-mask-rect" x="49.9" y="0" width="25.1" height="100" fill="white"/>
			<rect class="nav__bg-mask-rect" x="74.9" y="0" width="25.1" height="100" fill="white"/>
		</mask>
    </defs>
    <rect x="0" y="0" width="100" height="100" fill="url(#nav-grad)" mask="url(#nav__bg-mask)"></rect>
</svg>
<button class="nav-btn">
	<svg class="burger <?php echo $darkBurgerClass; ?>" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
	<rect class="burger__stroke"  x="2" y="2" width="32" height="32" fill="none" stroke="" stroke-miterlimit="10" stroke-width="4"/>
	<polyline class="burger__stroke-over"points="18 2 34 2 34 34 2 34 2 2 18 2" fill="none" stroke="" stroke-miterlimit="10" stroke-width="4"/>
	<g class="burger__plus">
		<rect class="burger__plus-left" x="8" y="16" width="10" height="4"/>
		<rect class="burger__plus-btm" x="16" y="18" width="4" height="10"/>
		<rect class="burger__plus-right" x="18" y="16" width="10" height="4"/>
		<rect class="burger__plus-top" x="16" y="8" width="4" height="10"/>
	</g>
	</svg>
</button>

</div>

   <div class="content_container">
      <div class="common_box">
        <div class="slide_img" id="slide_img_1"><div class="slide_img_shade"></div></div>
        <div class="title_box">
          <h2 class="main_title"><span>WORKS</span></h2>
        </div> 
      </div>
      <div class="content_box">
          <div class="content_content" >
            <div class="post_content">
                <div class="content_title">
                  <h1>支付宝支付接口对接的那些事</h1><span id="busuanzi_container_page_pv">
                  <span><time datetime=""></time></span>
                </div>
                  <h2 id="准备工作">准备工作</h2>

<ul>
  <li>1.注册一个支付宝账号，这个大家应该都有的</li>
  <li>2.用你的支付宝账号登陆蚂蚁金服开放平台<a href="https://www.ant-open.com/platform/home.htm">https://www.ant-open.com/platform/home.htm</a></li>
  <li>3.下载支付宝开发文档中demo备用<a href="https://doc.open.alipay.com/docs/doc.htm?treeId=203&amp;articleId=105288&amp;docType=1">https://doc.open.alipay.com/docs/doc.htm?treeId=203&amp;articleId=105288&amp;docType=1</a></li>
</ul>

<h2 id="整体思路">整体思路</h2>
<ul>
  <li>1.获取appid,所谓appid可以理解为我们网页的身份证。</li>
  <li>2.然后我们需要一些钥匙(所谓的钥匙就是官网教程中所说的公钥和密钥),把钥匙配置到我们的支付宝,有了这个钥匙我们才能让支付者打开我们的门，把钱付到我们这里来。</li>
  <li>3.拿到这些钥匙之后,配置到我们的客户端sdk中。</li>
  <li>4.前端把付款的金额和一些必要的参数通过表单传到sdk中,调取支付宝的后台之后,就会走上付款的光明大道了so easy～吧</li>
</ul>

<h2 id="具体步骤">具体步骤</h2>
<blockquote>
  <h3 id="第一步创建应用获取appid">第一步:创建应用获取appid</h3>
  <p>点击创建，按步骤一步一步创建你的应用</p>
</blockquote>

<blockquote>
  <p><img src="/source/img/zhifu_1.png" alt="" /></p>
</blockquote>

<blockquote>
  <p>创建好应用之后你就能看到你的appid了,留着备用</p>
</blockquote>

<blockquote>
  <p><img src="/source/img/zhifu_2.png" alt="" /></p>
</blockquote>

<blockquote>
  <h3 id="第二步生成rsa密钥">第二步:生成RSA密钥</h3>
  <p>首先下载一个生成密钥的工具
<a href="https://doc.open.alipay.com/docs/doc.htm?treeId=291&amp;articleId=105971&amp;docType=1">https://doc.open.alipay.com/docs/doc.htm?treeId=291&amp;articleId=105971&amp;docType=1</a></p>

  <p>按照上面的步骤»解压»运行就会看到如下界面</p>
</blockquote>

<blockquote>
  <p><img src="/source/img/zhifu_3.png" alt="" /></p>
</blockquote>

<blockquote>
  <p>由于我们刚才之前下载的demo是php语言的所以我们选择”非java适用选项”
密钥长度选择1024或者2048都是可以的,选2048会更安全一些,点击生成密钥</p>
</blockquote>

<blockquote>
  <h3 id="第三步-配置支付宝公钥">第三步 配置支付宝公钥</h3>
  <p>将我们刚才生成的公钥复制一下
<img src="/source/img/zhifu_4.png" alt="" /></p>
</blockquote>

<blockquote>
  <p>把复制过来的公钥配置到之前在开放平台创建的应用里面</p>
</blockquote>

<blockquote>
  <p><img src="/source/img/zhifu_6.png" alt="" /></p>
  <h3 id="第四步-客户端参数配置">第四步 客户端参数配置</h3>
  <p><img src="/source/img/tu_1.png" alt="" /></p>
</blockquote>

<p><img src="/source/img/tu_2.png" alt="" /></p>

<div class="highlighter-rouge"><pre class="highlight"><code>&lt;?php
$config = array (	
	//应用ID,您的APPID。
	'app_id' =&gt; "2016080400166887", 
	//商户私钥，您的原始格式RSA私钥
	'merchant_private_key' =&gt; "", //上面图1所示的私钥地方配置到这里
	//异步通知地址
	'notify_url' =&gt; "http:localhost:8888/wm/bx/html/alipay_pay/notify_url.php",
	
	//同步跳转
	'return_url' =&gt; "http:localhost:8888/wm/bx/html/alipay_pay/return_url.php",//同步通知跳转和异步通知跳转的路径看你测试的时候使用的是外网正式环境还是本地环境,我这里用的是我的本地环境，所以是localhost,如果没有服务器正式环境供你使用,可以百度搜索NATAPP。

	//编码格式
	'charset' =&gt; "UTF-8",

	//签名方式
	'sign_type'=&gt;"RSA",//签名方式设置成RSA或者RSA2取决于我们刚才配置支付宝公钥的时候配置的是RSA还是RSA2还有demo &gt; service &gt; AlipayTradeService.php 中也有一个签名方式的配置 ,三个地方保持一致!
	
	//支付宝网关
	//'gatewayUrl' =&gt; "https://openapi.alipay.com/gateway.do",  //如果是正式环境用支付宝的正式网关
	'gatewayUrl' =&gt;"https://openapi.alipaydev.com/gateway.do",  //如果是沙箱环境用沙箱环境提供的网关

	//支付宝公钥,查看地址：https://openhome.alipay.com/platform/keyManage.htm 对应APPID下的支付宝公钥。
	'alipay_public_key' =&gt; ""    //点见上面图2所得到的支付宝公钥配置到这里。
);
?&gt;
</code></pre>
</div>

<h2 id="开始运行测试">开始运行测试</h2>
<blockquote>
  <p>支付宝提供了沙箱测试环境，该环境的搭建请看这里<a href="https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.INGnMB&amp;treeId=200&amp;articleId=105311&amp;docType=1">https://doc.open.alipay.com/docs/doc.htm?spm=a219a.7629140.0.0.INGnMB&amp;treeId=200&amp;articleId=105311&amp;docType=1</a>
用带有php环境的测试环境打开demo中的index.php页面点击支付就会跳到支付宝的登陆页面了
<img src="/source/img/zhifu_12.png" alt="" /></p>
</blockquote>

<blockquote>
  <p>注意：该测试环境中只能用支付宝提供的沙箱环境中的支付宝账户密码登陆</p>
</blockquote>

<blockquote>
  <p>输入账号密码登陆</p>
</blockquote>

<blockquote>
  <p><img src="/source/img/zhifu_14.png" alt="" /></p>
</blockquote>

<blockquote>
  <p>确认付款之后输入密码就会收到支付宝返回的支付成功信息了,哦耶～～。</p>
</blockquote>

<blockquote>
  <p><img src="/source/img/zhifu_15.png" alt="" /></p>
</blockquote>

<h2 id="结语">结语</h2>
<blockquote>
  <p>其实大家看支付宝官网的教程就能学个八九不离十了,不要被官网贴出的后台代码所吓到,其实demo中很多都是写好了的,我们只是需要一些配置就可以了,配置的过程当中,对于刚刚接触这块的同学，会有几个名称会被官网教程搞晕(支付宝公钥,支付宝私钥,密钥等等一系列),耐心一点你就能捋清楚了。</p>
</blockquote>

<blockquote>
  <p>写到这里,突然想起开会讨论技术方案的时候和领导的对话。</p>
</blockquote>

<blockquote>
  <p>领导:”小田啊,支付宝调通了对吧？”</p>
</blockquote>

<blockquote>
  <p>小田:”通了”</p>
</blockquote>

<blockquote>
  <p>领导:”支付宝要输入帐号密码太麻烦,我们不用了,明天你对接一下银联支付!!!”</p>
</blockquote>

<blockquote>
  <p>小田:<img src="/source/img/zhifu_dog.png" alt="" /></p>
</blockquote>


   
            </div>
            
          </div>
          
                <div class="next_page_box">
                  <div class="read_next">阅读下一篇文章</div>
                  <div class="next_page">
                    <a class="" href="/tec/2016/04/18/Javascript%E5%9F%BA%E7%A1%80%E6%95%B4%E7%90%86.html" data-post-href="/tec/2016/04/18/Javascript%E5%9F%BA%E7%A1%80%E6%95%B4%E7%90%86.html">
                      <h4>JavaScript基础整理</h4>
                      <div></div>
                    </a>
                  </div>
                </div>
          
       </div>
    </div>
  </body>
<script src="/source/js/highlight.min.js"></script>
<script type="text/javascript" src="/source/js/jquery.js"></script>
<script type="text/javascript" src="/source/js/TweenMax.min.js"></script>
<script type="text/javascript" src="/source/js/DrawSVGPlugin.min.js"></script>
<script type="text/javascript" src="/source/js/tween.js"></script>
<script type="text/javascript" src="/source/js/animation.js"></script>
  <script type="text/javascript" src="/source/js/index.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
    $(document).ready(function(){
      //评论
        $('.comments').on('click',function(e){
          e.preventDefault();
          $('#lv-container').show();
        });
    })
  </script>
</html>