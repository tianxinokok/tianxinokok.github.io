<!DOCTYPE HTML>
<html>
<head>
  <meta charset="UTF-8">
    <link rel="stylesheet" href="/source/css/index.css" type="text/css">
    <link rel="stylesheet" href="/source/css/post_last.css" type="text/css">
    <link rel="stylesheet" href="/source/css/obsidian.min.css">
    <link rel="stylesheet" type="text/css" href="/source/css/font-awesome-4.7.0/css/font-awesome.min.css">
    <link rel="icon" href="/source/img/Favicon.png" sizes="32x32" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>摆渡先生</title>
</head>

 <body>
 <div class="nav_box" style="z-index: 10000">
<nav class="nav">
	<ul class="nav__list">
		<li class="nav__item">
			<a class="nav__link" href="/">
				<div class="nav__link-content">
					<span class="nav__link-num">01</span>
					<div class="nav__link-title">Works</div>
					<div class="nav__link-desc">What I'm made</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
		<li class="nav__item">
			<a class="nav__link" href="/new">
				<div class="nav__link-content">
					<span class="nav__link-num">02</span>
					<div class="nav__link-title">News</div>
					<div class="nav__link-desc">Latest ramblings</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
		<li class="nav__item">
			<a class="nav__link" href="/book">
				<div class="nav__link-content">
					<span class="nav__link-num">03</span>
					<div class="nav__link-title">Books</div>
					<div class="nav__link-desc">Many good books</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
		<li class="nav__item">
			<a class="nav__link" href="/contact">
				<div class="nav__link-content">
					<span class="nav__link-num">04</span>
					<div class="nav__link-title">Contact</div>
					<div class="nav__link-desc">Don't be shy</div>
				</div>
				<div class="nav__link-base"></div>
			</a>
			<div class="nav__item-line"></div>
		</li>
        <li class="phone_btn_close nav__item">
            x
        </li>
	</ul>
  <div class="header_logo">
    <svg version="1.1"  xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
   viewBox="0 0 825 299" style="enable-background:new 0 0 825 299;" xml:space="preserve">
<g class="logo_baidu">
  <path class="st0 logo_baidu_letter" fill="#fff" d="M132.94,183.58c-5.84,0.73-10.94,1.46-15.31,2.19c-2.19,0.73-4.02,0-5.47-2.19c0-5.1,1.82-8.02,5.47-8.75
    c3.64,0.73,8.75,1.09,15.31,1.09c0-5.1-0.37-10.2-1.09-15.31c0-2.91,1.09-4.38,3.28-4.38c7.29,0.73,10.57,3.65,9.84,8.75
    c-0.73,2.92-1.09,6.56-1.09,10.94h8.75c2.91,0.73,4.38,2.19,4.38,4.38c-2.19,1.46-6.56,2.19-13.13,2.19v9.84
    c7.29-1.45,11.3-1.45,12.03,0c0.73,2.19-3.28,4.74-12.03,7.66c0,11.67,0.36,21.52,1.09,29.53c0.73,5.84-1.46,10.21-6.56,13.13
    c-4.38,2.19-10.94,1.83-19.69-1.09c-7.3-3.64-11.3-7.29-12.03-10.94c17.5,4.38,26.25,3.65,26.25-2.19c0.73-9.48,0.73-17.86,0-25.16
    c-8.75,2.92-14.95,4.74-18.59,5.47c-2.92,0-4.74-1.45-5.47-4.38c-0.73-3.64,0.73-5.83,4.38-6.56c5.1-0.73,11.66-1.82,19.69-3.28
    V183.58z M217.16,162.8c3.64,0.73,5.47,3.28,5.47,7.66c-1.46,5.84-2.19,11.67-2.19,17.5c-0.73,3.65-2.92,5.11-6.56,4.38
    c-6.56-1.45-12.77-2.19-18.59-2.19c-0.73,2.19-0.73,4.38,0,6.56h14.22c3.64,0,5.83,0.73,6.56,2.19c0.73,2.92-1.09,4.38-5.47,4.38
    h-15.31c-0.73,2.19-0.73,4.38,0,6.56c15.31,0.73,28.8,0.73,40.47,0c-5.11,10.94-12.4,14.22-21.88,9.84
    c-6.56-2.19-13.13-3.28-19.69-3.28l-5.47,6.56c-2.92,2.92-5.11,5.47-6.56,7.66c3.64,2.92,7.66,4.02,12.03,3.28
    c5.1-1.45,8.38-3.28,9.84-5.47c-1.46-0.73-3.28-1.82-5.47-3.28c0.73-3.64,2.55-5.47,5.47-5.47c2.91-0.73,6.2,0.73,9.84,4.38
    c5.1,4.38,8.75,8.39,10.94,12.03c2.19,4.38,0.73,5.84-4.38,4.38c-3.65-2.91-7.66-5.83-12.03-8.75c-5.11,7.3-11.3,10.58-18.59,9.84
    c-8.02-3.64-13.13-5.1-15.31-4.38c-2.92,0.73-5.84,1.83-8.75,3.28c-2.92,0.73-5.11-0.36-6.56-3.28c-0.73-2.19,0-4.01,2.19-5.47
    c2.91-2.19,5.83-4.01,8.75-5.47c6.56-3.64,10.57-6.92,12.03-9.84c-14.59,0.73-24.06,1.83-28.44,3.28
    c-3.65,0.73-5.11-0.73-4.38-4.38c1.45-3.64,3.28-5.83,5.47-6.56c6.56,1.46,15.67,1.83,27.34,1.09c0.73-2.19,0.73-4.38,0-6.56
    c-7.3,0-13.49,0.37-18.59,1.09c-3.65,0.73-4.74-1.09-3.28-5.47c1.45-1.45,3.64-2.55,6.56-3.28c5.1,0.73,10.2,1.09,15.31,1.09
    c0.73-2.19,0.73-4.38,0-6.56c-6.56,0-11.67,0.73-15.31,2.19c-3.65,1.46-5.84,0.37-6.56-3.28c-0.73-8.75-1.46-15.67-2.19-20.78
    c0-4.38,2.55-6.2,7.66-5.47C181.8,164.99,198.93,164.99,217.16,162.8z M167.94,170.46c-0.73,2.92-0.73,7.3,0,13.13
    c3.64,1.46,6.56,1.46,8.75,0c0.73-4.38,0.73-8.75,0-13.13C174.51,169.73,171.58,169.73,167.94,170.46z M184.35,183.58
    c3.64,0.73,6.56,0.73,8.75,0c0.73-5.1,0.73-9.48,0-13.13c-2.92-0.73-5.84-0.73-8.75,0C183.62,175.57,183.62,179.94,184.35,183.58z
     M200.76,170.46c-0.73,3.65-0.73,8.02,0,13.13c4.38,1.46,7.66,1.46,9.84,0c2.19-3.64,2.55-8.02,1.09-13.13
    C208.05,169.73,204.4,169.73,200.76,170.46z"/>
  <path class="st0 logo_baidu_letter" fill="#fff" d="M255.44,189.05c8.75,2.92,17.5,5.11,26.25,6.56c1.45,0.73,1.45,1.83,0,3.28c-5.84,2.19-11.3,3.28-16.41,3.28
    c-7.3,0.73-13.13,0-17.5-2.19c-2.92-2.19-2.92-5.1,0-8.75C249.98,189.05,252.52,188.33,255.44,189.05z M255.44,216.4
    c8.75-1.45,17.5-4.01,26.25-7.66c1.45-0.73,2.55-0.73,3.28,0c-2.19,4.38-5.11,8.02-8.75,10.94c-4.38,3.65-10.94,6.93-19.69,9.84
    c-2.92,0-5.11-1.82-6.56-5.47C249.24,219.68,251.07,217.13,255.44,216.4z M262.01,166.08c7.29,5.11,14.95,9.48,22.97,13.13
    c-0.73,1.46-4.38,2.19-10.94,2.19s-12.77-1.45-18.59-4.38c-2.19-1.45-2.92-3.28-2.19-5.47
    C254.71,167.18,257.63,165.36,262.01,166.08z M313.41,186.87c-4.38-0.73-8.39-0.36-12.03,1.09c0,5.84-0.73,13.13-2.19,21.88
    c-0.73,4.38-2.19,8.39-4.38,12.03c-2.19,3.65-4.38,6.56-6.56,8.75c-5.11,4.38-9.48,6.93-13.13,7.66c-2.92,0-5.47-0.36-7.66-1.09
    c-1.46-1.45-2.55-2.55-3.28-3.28c2.91-2.19,6.2-4.01,9.84-5.47c3.64-2.19,6.92-5.1,9.84-8.75c2.19-3.64,4.01-7.29,5.47-10.94
    c1.45-5.83,2.19-11.3,2.19-16.41c0.73-8.75-0.37-16.04-3.28-21.88c0-4.38,2.19-6.56,6.56-6.56c4.38,1.46,12.39,2.19,24.06,2.19
    v-6.56c1.45-2.91,4.38-4.01,8.75-3.28c2.19,0.73,4.01,1.83,5.47,3.28v6.56h20.78c6.56,0,9.84,1.46,9.84,4.38
    c-1.46,1.46-7.66,2.19-18.59,2.19c-1.46,2.92-1.46,5.47,0,7.66h8.75c5.83,0,8.75,1.09,8.75,3.28s-1.09,3.28-3.28,3.28h-14.22
    c-0.73,3.65-0.73,6.93,0,9.84c0.73,3.65-1.09,5.11-5.47,4.38c-2.92-1.45-5.84-2.55-8.75-3.28c-2.19,0-4.38,0-6.56,0
    c-2.19,0.73-4.02,1.46-5.47,2.19c-3.65,0.73-5.47-0.36-5.47-3.28C314.14,192.33,314.14,189.05,313.41,186.87z M314.51,202.18
    c2.19,0.73,4.38,1.09,6.56,1.09c7.29-0.73,14.95-0.36,22.97,1.09c5.1,1.46,6.92,4.02,5.47,7.66c-2.19,2.92-5.11,6.93-8.75,12.03
    c16.04,5.11,28.07,7.66,36.09,7.66c-7.3,10.94-14.59,14.58-21.88,10.94c-6.56-4.38-13.49-8.75-20.78-13.13
    c-9.48,5.11-17.87,8.75-25.16,10.94c-6.56,1.46-10.58-0.73-12.03-6.56c0.73-0.73,4.73-1.82,12.03-3.28
    c8.02-1.45,14.22-3.64,18.59-6.56c-4.38-2.91-8.39-5.47-12.03-7.66c0-3.64,1.82-5.1,5.47-4.38c3.64,2.19,7.66,4.74,12.03,7.66
    c2.91-2.19,4.73-4.73,5.47-7.66c0.73-2.19-0.73-3.28-4.38-3.28c-6.56,0-12.77,0.37-18.59,1.09c-3.65,2.19-5.84,2.19-6.56,0
    C309.76,205.46,311.58,202.91,314.51,202.18z M313.41,172.65c-3.65-0.73-8.02-0.73-13.13,0c-0.73,2.92-0.73,5.47,0,7.66
    c4.38,0.73,8.75,0.73,13.13,0C314.14,177.39,314.14,174.83,313.41,172.65z M322.16,172.65c-0.73,2.92-0.73,5.47,0,7.66
    c5.1,0.73,9.48,0.73,13.13,0c0.73-2.91,0.73-5.47,0-7.66C330.91,171.92,326.54,171.92,322.16,172.65z M336.38,186.87
    c-4.38-0.73-9.12-0.73-14.22,0c0,1.46,0,3.28,0,5.47c4.38,0.73,8.38,0.73,12.03,0C336.38,192.33,337.11,190.51,336.38,186.87z"/>
</g>
<polyline class="st1 logo_baidu_border" points="409.5,179.35 409.5,261 81.5,261 81.5,140 367.18,140 " fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="16"/>
<g class="logo__plus" fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="16">
  <line class="st1 logo__plus-horz" x1="382.5" y1="140.5" x2="436.5" y2="140.5"/>
  <!-- <path class="st1" d="M411.5,117.5"/> -->
  <line class="st1 logo__plus-vert" x1="409.5" y1="167.5" x2="409.5" y2="113.5"/>
</g>
<g class="logo__xiansheng">
  <path class="st2 logo_xiansheng_letter" fill="#fff" d="M484.78,60.65c-5.11,3.65-9.12,5.47-12.03,5.47c-4.38,0-5.47-1.09-3.28-3.28c5.1-2.91,8.75-8.02,10.94-15.31
    c1.45-6.56,3.64-9.48,6.56-8.75c2.91,0,4.73,1.46,5.47,4.38c0,3.65-1.09,6.56-3.28,8.75h16.41V39.87c0-4.38,1.82-6.92,5.47-7.66
    c6.56,0,9.84,2.92,9.84,8.75V51.9h25.16c4.38,0,6.2,1.83,5.47,5.47c-0.73,2.19-2.19,3.28-4.38,3.28h-26.25v8.75
    c10.94,0,22.6,0.37,35,1.09c2.91,0,4.73,1.09,5.47,3.28c0.73,4.38-1.83,6.56-7.66,6.56c-10.21-0.73-19.69-1.09-28.44-1.09v10.94
    c0,8.02,6.56,12.03,19.69,12.03c14.58,0.73,26.25-1.45,35-6.56c-2.92,10.94-6.2,17.5-9.84,19.69c-7.3,5.11-17.87,5.84-31.72,2.19
    c-5.11-1.45-9.48-3.28-13.13-5.47c-7.3-4.38-11.3-10.57-12.03-18.59V79.24h-6.56c-0.73,4.38-2.55,9.48-5.47,15.31
    c-6.56,9.48-14.22,16.05-22.97,19.69c-7.3,2.92-14.59,3.65-21.88,2.19c-6.56-2.91-8.75-5.83-6.56-8.75
    c24.79-0.73,40.1-10.2,45.94-28.44c-5.84-0.73-13.49,0-22.97,2.19c-7.3,2.19-10.58,0.73-9.84-4.38c3.64-5.83,6.92-8.38,9.84-7.66
    c8.02,1.46,18.95,1.46,32.81,0v-8.75H484.78z"/>

  <path class="st3 logo_xiansheng_letter" fill="#fff" d="M645.29,63.43c-6.56-0.73-14.22-0.73-22.97,0c-2.92,3.65-7.3,6.93-13.13,9.84c-2.92,0.73-4.02,0-3.28-2.19
    c5.83-6.56,9.84-13.48,12.03-20.78c2.19-8.75,6.2-12.03,12.03-9.84c4.38,2.92,3.64,8.02-2.19,15.31h17.5
    c0.73-6.56,0.73-12.39,0-17.5c0-4.38,2.19-6.92,6.56-7.66c5.83,0,8.75,2.55,8.75,7.66c0,8.75,0.36,14.59,1.09,17.5h22.97
    c8.02-0.73,12.03,0.73,12.03,4.38c2.19,3.65-9.48,4.74-35,3.28c-1.46,3.65-1.46,7.3,0,10.94l21.88,1.09c2.91,0,6.2,0.73,9.84,2.19
    c1.45,2.92,1.09,4.74-1.09,5.47c-8.75-0.73-18.23-0.73-28.44,0c-2.19,0-3.28,3.65-3.28,10.94c0.73,6.56,16.04,8.02,45.94,4.38
    c3.64,0,8.02-0.73,13.13-2.19c-3.65,16.77-12.03,22.97-25.16,18.59c-22.61-8.02-48.13-10.2-76.56-6.56
    c-10.94,2.19-17.87,3.65-20.78,4.38c-5.84,1.46-8.02-0.36-6.56-5.47c2.91-5.83,6.92-9.48,12.03-10.94
    c2.91-0.73,7.29-0.36,13.13,1.09c18.95,2.19,28.8,1.46,29.53-2.19c1.45-8.02,0-12.03-4.38-12.03c-7.3-0.73-14.22,0-20.78,2.19
    c-4.38,1.46-5.84-0.36-4.38-5.47c0.73-2.19,2.91-4.38,6.56-6.56c2.91-1.45,5.83-1.09,8.75,1.09c5.83,0.73,10.2,0.73,13.13,0
    C646.38,72.91,646.74,69.27,645.29,63.43z"/>
</g>
<polyline class="st1 logo_xiansheng_border" points="409.5,101.65 409.5,20 737.5,20 737.5,141 451.82,141 " fill="none" stroke="#fff" stroke-miterlimit="10" stroke-width="16"/>
</svg>
  </div>
</nav>
<svg class="nav__bg" width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none" xmlns="http://www.w3.org/2000/svg">
    <defs>
        <linearGradient class="nav__grad" x1="92.6356902%" y1="7.36430977%" x2="0%" y2="100%" id="nav-grad">
            <!-- <stop stop-color="#000000" offset="20%"></stop>
            <stop stop-color="#223e36" offset="100%"></stop> -->
            <!-- <stop stop-color="#43C6AC" offset="20%"></stop>
            <stop stop-color="#191654" offset="100%"></stop> -->
            <stop stop-color="#00dbde" offset="20%"></stop>
            <stop stop-color="#fc00ff" offset="100%"></stop>
        </linearGradient>
		<mask id="nav__bg-mask" class="nav__bg-mask" maskUnits="userSpaceOnUse"x="0" y="0" width="100" height="100">
		  	<rect class="nav__bg-mask-rect" x="0" y="0" width="25" height="100" fill="white"/>
			<rect class="nav__bg-mask-rect" x="24.9" y="0" width="25.1" height="100" fill="white"/>
			<rect class="nav__bg-mask-rect" x="49.9" y="0" width="25.1" height="100" fill="white"/>
			<rect class="nav__bg-mask-rect" x="74.9" y="0" width="25.1" height="100" fill="white"/>
		</mask>
    </defs>
    <rect x="0" y="0" width="100" height="100" fill="url(#nav-grad)" mask="url(#nav__bg-mask)"></rect>
</svg>
 <!--pc_menu_btn--> 
<button class="nav-btn">
  <svg class="burger <?php echo $darkBurgerClass; ?>" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 36 36">
  <rect class="burger__stroke"  x="2" y="2" width="32" height="32" fill="none" stroke="" stroke-miterlimit="10" stroke-width="4"/>
  <polyline class="burger__stroke-over"points="18 2 34 2 34 34 2 34 2 2 18 2" fill="none" stroke="" stroke-miterlimit="10" stroke-width="4"/>
  <g class="burger__plus">
    <rect class="burger__plus-left" x="8" y="16" width="10" height="4"/>
    <rect class="burger__plus-btm" x="16" y="18" width="4" height="10"/>
    <rect class="burger__plus-right" x="18" y="16" width="10" height="4"/>
    <rect class="burger__plus-top" x="16" y="8" width="4" height="10"/>
  </g>
  </svg>
</button>
</div>

   <div class="content_container">
      <div class="common_box">
        <div class="slide_img" id="slide_img_1"><div class="slide_img_shade"></div></div>
        <div class="title_box">
          <h2 class="main_title"><span>WORKS</span></h2>
        </div> 
      </div>
      <div class="content_box">
          <div class="content_content" >
            <div class="post_content">
                <div class="content_title">
                  <h1>Iterator 和 for...of 循环</h1><span id="busuanzi_container_page_pv">
                  <span><time datetime=""></time></span>
                </div>
                  <h3 id="代码总结">代码总结</h3>
<div class="highlighter-rouge"><pre class="highlight"><code>//调用Iterator的场合
//（1）解构赋值
let set = new Set().add('a').add('b').add('c');
let [x,y] = set;
console.log(x,y);   //"a","b"
let [first,...rest] = set;
console.log(first); //"a"
console.log(rest);  //["b", "c"]

//（2）扩展运算符
let str = 'hello';
[...str];                   // ["h", "e", "l", "l", "o"]
let arr = ['a','b'];
console.log([...arr,'c']); //["a", "b", "c"]

// （3）其他场合
for…of

Array.from()

Map(), Set(), WeakMap(), WeakSet()（比如new Map([[‘a’,1],[‘b’,2]])）

Promise.all()
--------------------------------------------------------------------------------------------------------------------
//for…of循环可以使用的范围包括数组，Set和Map结构、某些类似数组的对象（比如arguments对象、DOM NodeList对象），Generator 对象，还有字符串。

//（1）数组
//for…of循环可以代替数组实例的forEach方法。
let arr = ['a','b','c'];
arr.forEach(function(element,index){
    console.log(element);  //'a' 'b' 'c'
    console.log(index);    //0 1 2
})

//js原有的for…in循环，只能获得对象的键名，不能直接获取键值。ES6提供for…of循环，允许遍历获得键值。如果要通过for…of获取数组的索引，可以借助数组的entries方法和keys方法。
let arr = ['a','b','c'];

for(let v in arr){
    console.log(v);  //0 1 2 
}

for(let v of arr){
    console.log(v); //'a' 'b' 'c'
}

//（2）Set和Map结构
let set = new Set(['a','b','c']);
for(var v of set){
    console.log(v);     //"a","b","c"
}


var map = new Map();
map.set('name','tx');
map.set('age',24);

for(let [name,value] of map){
    console.log(name + ':' + value); // "name:tx" "age:24"
} 

//（3）类似数组的对象（包括字符串、NodeList对象、arguments对象）

//字符串
let str = 'hello';
for(let v of str){
    console.log(v);
}
//"h" "e" "l" "l" "o"

//DOM NodeList对象
let sDiv = document.querySelectorAll('div');
for(let v of sDiv){
    console.log(v);
}
//&lt;div&gt;&lt;/div&gt;
//&lt;div&gt;&lt;/div&gt;


//arguments对象
function setName(){
    for(let v of arguments){
        console.log(v);
    }
}
setName('name','tx');
//"name"
//"tx"

//（4）对象
//并不是所有类似数组的对象都具有Iterator 接口，一个简单的解决办法，就是使用Array.from方法将其转为数组。
let obj = {
    length:2,
    name:'tx',
    age:24
};
for(let v of obj){
    console.log(v); //报错 obj is not iterable
}

//正确
for(let v of Array.from(obj)){
    console.log(v);
}
//"tx"
//24

//对于普通的对象，for…of结构不能直接使用，解决办法是，使用Object.keys()方法将对象的键名生成一个数组，然后遍历这个数组。
let obj = {
    name:'tx',
    age:24
};
for(let v of Object.keys(obj)){
    console.log(v);
    //"name"
    //"age"
    console.log(obj[v]);
    //"tx"
    //24
}
--------------------------------------------------------------------------------------------------------------------
//for..of比起forEach可以跳出中途跳出循环
for(let i of arr){
    if(i &gt; 100){
        break;
    }
}
</code></pre>
</div>

<h3 id="一iterator遍历器的概念">一、Iterator(遍历器)的概念</h3>
<p>js原有的表示集合的数据结构，主要是数组(Array)和对象(Object)，ES6又添加了Map和Set。这样就有了四种数据集合，用户还可以组合使用他们，定义自己的数据结构，比如数组的成员是Map，Map的成员是对象。这样就需要一种统一的接口机制，来处理所有不同的数据结构。</p>

<p>遍历器（Iterator）就是这样一种机制。他是一种接口，为各种不同的数据结构提供统一的访问机制。任何数据结构只要部署Iterator 接口，就可以完成遍历操作。</p>

<p>Iterator的作用有三个：</p>

<p>1.为各种数据结构，提供一个统一的、简便的访问接口。</p>

<p>2.使数据结构的成员能够按某种次序排列。</p>

<p>3.es6创造了一种新的遍历命令for…of循环，Iterator接口主要供for…of消费。</p>

<p>Iterator的遍历过程是这样的。</p>

<p>（1）创建一个指针对象，指向当前数据结构的起始位置。也就是说，遍历器对象本质上，就是一个指针对象。</p>

<p>（2）第一次调用指针对象的next方法，可以将指针指向数据结构的第一个成员。</p>

<p>（3）第二次调用指针对象的next方法，指针就指向数据结构的第二个成员。</p>

<p>（4）不断调用指针的next方法，直到它指向数据结构的结束位置。</p>

<p>每一次调用next方法，都会返回数据结构的当前成员的信息。具体来说，就是返回一个包含value和done两个属性的对象。value是当前成员的值，done是一个布尔值，表示遍历是否结束。</p>

<h3 id="二默认iterator接口">二、默认Iterator接口</h3>
<p>Iterator接口的目的，就是为所有数据结构，提供了一种统一的访问机制，即for…of循环。当使用for…of循环遍历某种数据结构时，该循环会自动寻找Iterator接口。</p>

<p>一种数据解构只要部署了Iterator接口，就称这种数据结构是可遍历的。</p>

<p>es6规定，默认的Iterator接口部署在数据结构的Symbol.iterator属性，或者说，一个数据结构只要具有Symbol.iterator属性，就可以认为是可遍历的。</p>

<p>Symbol.iterator属性本身是一个函数，就是当前数据结构默认的遍历器生成函数。执行这个函数，就会返回一个遍历器。属性名Symbol.iterator是一个表达式，返回Symbol对象的iterator属性，这是一个预定义好的、类型为Symbol的特殊值，所以要放在方括号内。</p>

<p>ES6的有些数据结构原生具备Iterator接口（数组），即不用任何处理，就可以被for…of循环遍历。原因就是，这些数据解构原生部署了Symbol.iterator属性，另外一些数据结构没有（比如对象）。</p>

<p>原生具备Iterator接口的数据结构如下：</p>

<p>–Array</p>

<p>–Map</p>

<p>–Set</p>

<p>–String</p>

<p>–TypedArray</p>

<p>–函数的arguments对象</p>

<p>–NodeList对象</p>

<p>下面的例子是数组的Symbol.iterator属性。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr = ['a','b','c'];
let iter = arr[Symbol.iterator]();
iter.next() // { value: "a", done: false}
iter.next() // { value: 'b', done: false }
iter.next() // { value: 'c', done: false }
iter.next() // { value: undefined, done: true }
</code></pre>
</div>
<p>上面代码中，变量arr是一个数组，原生就具有遍历器接口，部署在arr的Symbol.iterator属性上面。所以，调用这个属性，就可以得到遍历器对象。</p>

<p>其他数据结构（主要是对象）的iterator接口，都需要自己在Symbol.iterator属性上部署，这样才会被for…of循环遍历。</p>

<p>对象（Object）之所以没有部署Iterator接口，是因为对象属性的遍历顺序是不确定的，需要开发者手动指定，本质上，遍历器是一种线性处理，对于任何非线性的数据解构，部署遍历器接口，就等于部署一种线性转换。不过，对象部署遍历器接口并不是很必要，因为这时对象实际上被当作Map结构使用。</p>

<p>一个对象如果要具备可被for…of循环调用的 Iterator 接口，就必须在Symbol.iterator的属性上部署遍历器生成方法（原型链上的对象具有该方法也可）。</p>

<h3 id="三调用iterator接口的场合">三、调用Iterator接口的场合</h3>
<p>有一些场合会默认调用Iterator接口，除了for…of循环，还有几个别的场合。</p>

<h4 id="1解构赋值">（1）解构赋值</h4>
<p>对数组和Set结构进行解构赋值时，会默认调用Symbol.iterator方法。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let set = new Set().add('a').add('b').add('c');
let [x,y] = set;
console.log(x,y);   //"a","b"
let [first,...rest] = set;
console.log(first); //"a"
console.log(rest);  //["b", "c"]
</code></pre>
</div>
<h4 id="2扩展运算符">（2）扩展运算符</h4>
<p>扩展运算符(…)也会调用默认的Iterator接口。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let str = 'hello';
[...str];                   // ["h", "e", "l", "l", "o"]
let arr = ['a','b'];
console.log([...arr,'c']); //["a", "b", "c"]
</code></pre>
</div>
<p>上面代码的扩展运算符内部就调用了Iterator接口。</p>

<p>这提供了一种简便机制，可以将任何部署了Iterator接口的数据结构转为数组。也就是说，只要某个数据结构部署了Iterator接口，就可以对他使用扩展运算符，将其转为数组。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr = [...iterable];
</code></pre>
</div>
<h4 id="3yield">（3）yield*</h4>
<p>yield<em>后面跟的是一个可遍历的结构，它会调用该结构的遍历器接口。【】yield</em>不懂</p>

<h4 id="4其他场合">（4）其他场合</h4>
<p>由于数组的遍历会调用遍历器接口，所以任何接受数组作为参数的场合，其实都调用了遍历器接口。如下面例子。</p>

<p>–for…of</p>

<p>–Array.from()</p>

<p>–Map(), Set(), WeakMap(), WeakSet()（比如new Map([[‘a’,1],[‘b’,2]])）</p>

<p>–Promise.all()</p>

<h3 id="四字符串的iterator接口">四、字符串的Iterator接口</h3>
<p>字符串是一个类似数组的对象，也原生具有Iterator接口。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let someString = 'hi';
typeof someString[Symbol.iterator];  //"function"

var iterator  = someString[Symbol.iterator]();
console.log(iterator.next()); //{value: "h", done: false}
console.log(iterator.next()); //{value: "i", done: false}
console.log(iterator.next()); //{value: undefined, done: true}
</code></pre>
</div>
<p>上面代码中，调用Symbol.iterator方法返回一个遍历器对象，在这个遍历器上可以调用next方法，实现对于字符串的遍历。</p>

<h3 id="五forof循环">五、for…of循环</h3>
<p>for…of作为遍历所有数据结构的统一方法。</p>

<p>一个数据结构只要部署了Symbol.Iterator属性，就被视为具有Iterator接口，就可以用for…of遍历他的成员。也就是说，for…of循环内部调用的是Symbol.iterator方法。</p>

<p>for…of循环可以使用的范围包括数组，Set和Map结构、某些类似数组的对象（比如arguments对象、DOM NodeList对象），后文的Generator 对象，还有字符串。</p>

<h4 id="数组">数组</h4>
<p>数组原生具备Iterator接口（即默认部署了Symbol.iterator属性），for…of循环本质上是调用这个接口产生的遍历器。可用下面代码证明。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr = ['a','b','c'];
for(let v of arr){
    console.log(v);  //a b c
}
let obj = {};
obj[Symbol.iterator] = arr[Symbol.iterator].bind(arr);
for(let v of obj){
    console.log(v); //a b c
}
</code></pre>
</div>
<p>上面代码中，空对象obj部署了数组arr的Symbol.iterator属性，结果obj的for…of循环，产生了与arr完全一样的结果。</p>

<p>for…of循环可以代替数组实例的forEach方法。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr = ['a','b','c'];
arr.forEach(function(element,index){
    console.log(element);  //'a' 'b' 'c'
    console.log(index);    //0 1 2
})
</code></pre>
</div>
<p>js原有的for…in循环，只能获得对象的键名，不能直接获取键值。ES6提供for…of循环，允许遍历获得键值。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr = ['a','b','c'];

for(let v in arr){
    console.log(v);  //0 1 2 
}

for(let v of arr){
    console.log(v); //'a' 'b' 'c'
}

</code></pre>
</div>
<p>上面代码表明，for…in循环读取键名，for…of循环读取键值。如果要通过for…of获取数组的索引，可以借助数组的entries方法和keys方法。</p>

<p>for…of循环调用遍历器接口，数组的遍历器接口只返回具有数字索引的属性。这一点跟for…in循环也不一样。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr = [1,2,3];
arr.foo = 'abc';
console.log(arr);     //[1, 2, 3, foo: "abc"]
for(let i in arr){
    console.log(i);   //"0" "1" "2" "foo"
}

for(let i of arr){
    console.log(i);   //1 2 3
}
</code></pre>
</div>
<p>上面代码中，for…of循环没有循环数组arr的foo属性。</p>

<h4 id="set和map结构">Set和Map结构</h4>
<p>Set和Map结构也原生具有Iterator接口，可以直接使用for…of循环。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let set = new Set(['a','b','c']);
for(var v of set){
    console.log(v);     //"a","b","c"
}


var map = new Map();
map.set('name','tx');
map.set('age',24);

for(let [name,value] of map){
    console.log(name + ':' + value); // "name:tx" "age:24"
} 
</code></pre>
</div>
<p>上面代码有两个需要注意的地方，第一：遍历的顺序是按照各个成员被添加进数据结构的顺序。第二，遍历Set结构时，返回的是一个值，而遍历Map结构时，返回的是一个数组，该数组的两个成员分别为当前Map成员的键名和键值。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>var map = new Map();
map.set('name','tx');
map.set('age',24);

for(let item of map){
    console.log(item);
}
//["name", "tx"]
//["age", 24]
for(let [name,value] of map){
    console.log(name + ':' + value); // "name:tx" "age:24"
}
//name:tx
//age:24
</code></pre>
</div>
<h4 id="计算生成的数据结构">计算生成的数据结构</h4>
<p>有些数据结构是在现有数据结构的基础上，计算生成的。比如，es6的数组，Set、Map都部署了以下三个方法，调用后都返回遍历器对象。</p>

<p>-enrites()：返回一个遍历器对象，用来遍历[“键名”,”键值”]组成的数组。对于数组，键名就是索引值；对于Set，键名与键值相同。Map结构的Iterator接口，默认就是调用entires()方法。</p>

<p>-keys()：返回一个遍历器对象，用来遍历所有的键名。</p>

<p>-values()：返回一个遍历器对象，用来遍历所有的键值。</p>

<p>这三个方法调用后生成的的遍历器对象，所遍历的都是计算生成的数据结构。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr = ['a','b','c'];
for(let item of arr.entries()){
    console.log(item);
}
//[0, "a"]
//[1, "b"]
//[2, "c"]
</code></pre>
</div>
<h4 id="类似数组的对象">类似数组的对象</h4>
<p>类似数组的对象包括字符串、NodeList对象、arguments对象。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>//字符串
let str = 'hello';
for(let v of str){
    console.log(v);
}
//"h" "e" "l" "l" "o"

//DOM NodeList对象
let sDiv = document.querySelectorAll('div');
for(let v of sDiv){
    console.log(v);
}
//&lt;div&gt;&lt;/div&gt;
//&lt;div&gt;&lt;/div&gt;


//arguments对象
function setName(){
    for(let v of arguments){
        console.log(v);
    }
}
setName('name','tx');
//"name"
//"tx"
</code></pre>
</div>
<p>并不是所有类似数组的对象都具有Iterator 接口，一个简单的解决办法，就是使用Array.from方法将其转为数组。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let obj = {
    length:2,
    name:'tx',
    age:24
};
for(let v of obj){
    console.log(v); //报错 obj is not iterable
}

//正确
for(let v of Array.from(obj)){
    console.log(v);
}
//"tx"
//24
</code></pre>
</div>
<h4 id="对象">对象</h4>
<p>对于普通的对象，for…of结构不能直接使用，会报错，必须部署了Iterator接口后才能使用。但是，这样情况下，for…in循环依然可以用来遍历键名。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let obj = {
    name:'tx',
    age:24
};
for(let v in obj){
    console.log(v);
}
//"name"
//"age"

for(let v of obj){  //报错 obj is not iterable
    
}
</code></pre>
</div>
<p>上面代码表示，对于普通的对象，for…in循环可以遍历键名,for…of循环会报错。</p>

<p>一种解决办法是，使用Object.keys()方法将对象的键名生成一个数组，然后遍历这个数组。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let obj = {
    name:'tx',
    age:24
};
for(let v of Object.keys(obj)){
    console.log(v);
    //"name"
    //"age"
    console.log(obj[v]);
    //"tx"
    //24
}
</code></pre>
</div>
<p>另一个方法是使用 Generator 函数将对象重新包装一下。</p>

<p>…….</p>

<h4 id="与其他遍历语法的比较">与其他遍历语法的比较</h4>
<p>js提供了多种遍历数组的方法。最原始的写法就是for循环。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr  = ['a','b','c'];

for(let i  = 0 ; i &lt; arr.length ; i++){
    console.log(arr[i]);
}
</code></pre>
</div>
<p>上面这种写法比较麻烦，因此数组提供内置的forEach方法。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr  = ['a','b','c'];

arr.forEach(function(value){
    console.log(value);
})
</code></pre>
</div>
<p>这种写法的问题是，无法中途跳出forEach循环，break命令或return命令都不能奏效。</p>

<p>for…in循环可以遍历数组的键名。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>let arr  = ['a','b','c'];

for(let i in arr){
    console.log(arr[i]);
}
</code></pre>
</div>
<p>for…in循环有以下几个缺点。</p>

<p>–数组的键名是数字，但是for…in循环是以字符串作为键名”0”,”1”,”2”。</p>

<p>–for…in循环不仅遍历数字键名，还会遍历手动添加的其他键，甚至包括原型链上的键。</p>

<p>–某些情况下，for…in循环会以任意顺序遍历键名。</p>

<p>总之，for…in循环主要是为遍历对象而设计的，不适用于遍历数组。</p>

<p>for…of循环有一些显著的优点。</p>

<p>–跟for…in一样的简单写法，但是没有for…in所具有的缺点。</p>

<p>–不同于forEach方法，他可以配合break、continue、return配合使用。</p>

<p>–提供了遍历所有数据结构的统一操作接口。</p>

<p>下面是一个使用break语句，跳出for…of循环的例子。</p>
<div class="highlighter-rouge"><pre class="highlight"><code>for(let i of arr){
    if(i &gt; 100){
        break;
    }
}
</code></pre>
</div>
<p>如果当前项大于100，就会跳出循环。</p>


   
            </div>
            
          </div>
          
                <div class="next_page_box">
                  <div class="read_next">阅读下一篇文章</div>
                  <div class="next_page">
                    <a class="" href="http://localhost:4000/tec/2019/06/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" data-post-href="http://localhost:4000/tec/2019/06/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html">
                      <h4>Set和Map数据结构</h4>
                      <div></div>
                    </a>
                  </div>
                </div>
          
          <div class="phone_bottom">
              <a class="" href="http://localhost:4000/tec/2019/07/03/Class%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html" data-post-href="http://localhost:4000/tec/2019/07/03/Class%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%95.html">
              PREV
              </a>
              <a class="" href="http://localhost:4000/tec/2019/06/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html" data-post-href="http://localhost:4000/tec/2019/06/20/Set%E5%92%8CMap%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84.html">
                NEXT
              </a>
          </div>
       </div>
    </div>
  </body>
<script src="/source/js/highlight.min.js"></script>
<script type="text/javascript" src="/source/js/jquery.js"></script>
<script type="text/javascript" src="/source/js/TweenMax.min.js"></script>
<script type="text/javascript" src="/source/js/DrawSVGPlugin.min.js"></script>
<script type="text/javascript" src="/source/js/tween.js"></script>
<script type="text/javascript" src="/source/js/animation.js"></script>
  <script type="text/javascript" src="/source/js/index.js"></script>
  <script>
    hljs.initHighlightingOnLoad();
    $(document).ready(function(){
      //评论
        $('.comments').on('click',function(e){
          e.preventDefault();
          $('#lv-container').show();
        });
    })
  </script>
</html>